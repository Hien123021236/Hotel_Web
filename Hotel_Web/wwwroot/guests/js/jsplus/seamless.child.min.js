var NO_JQUERY={};(function(n,t,i){var u,r;"console"in n||(u=n.console={},u.log=u.warn=u.error=u.debug=function(){});t===NO_JQUERY&&(t={fn:{},extend:function(){for(var t,i,r=arguments[0],n=1,u=arguments.length;n<u;n++){t=arguments[n];for(i in t)r[i]=t[i]}return r}});t.fn.pm=function(){return console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])"),this};t.pm=n.pm=function(n){r.send(n)};t.pm.bind=n.pm.bind=function(n,t,i,u,f){r.bind(n,t,i,u,f===!0)};t.pm.unbind=n.pm.unbind=function(n,t){r.unbind(n,t)};t.pm.origin=n.pm.origin=null;t.pm.poll=n.pm.poll=200;r={send:function(n){var i=t.extend({},r.defaults,n),f=i.target,u;if(!i.target){console.warn("postmessage target window required");return}if(!i.type){console.warn("postmessage type required");return}u={data:i.data,type:i.type};i.success&&(u.callback=r._callback(i.success));i.error&&(u.errback=r._callback(i.error));"postMessage"in f&&!i.hash?(r._bind(),f.postMessage(JSON.stringify(u),i.origin||"*")):(r.hash._bind(),r.hash.send(i,u))},bind:function(n,t,i,u,f){r._replyBind(n,t,i,u,f)},_replyBind:function(i,u,f,e,o){var s,h;"postMessage"in n&&!e?r._bind():r.hash._bind();s=r.data("listeners.postmessage");s||(s={},r.data("listeners.postmessage",s));h=s[i];h||(h=[],s[i]=h);h.push({fn:u,callback:o,origin:f||t.pm.origin})},unbind:function(n,t){var i=r.data("listeners.postmessage"),f,e,s,o,u;if(i)if(n)if(t){if(f=i[n],f){for(e=[],u=0,s=f.length;u<s;u++)o=f[u],o.fn!==t&&e.push(o);i[n]=e}}else delete i[n];else for(u in i)delete i[u]},data:function(n,t){return t===i?r._data[n]:(r._data[n]=t,t)},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var t=[],n=0;n<32;n++)t[n]=r._CHARS[0|Math.random()*32];return t.join("")},_callback:function(n){var t=r.data("callbacks.postmessage"),i;return t||(t={},r.data("callbacks.postmessage",t)),i=r._random(),t[i]=n,i},_bind:function(){r.data("listening.postmessage")||(n.addEventListener?n.addEventListener("message",r._dispatch,!1):n.attachEvent&&n.attachEvent("onmessage",r._dispatch),r.data("listening.postmessage",1))},_dispatch:function(n){var t,s,e,h,o,u,c,i,l;try{t=JSON.parse(n.data)}catch(f){console.warn("postmessage data invalid json: ",f);return}if(!t.type){console.warn("postmessage message type required");return}if(s=r.data("callbacks.postmessage")||{},e=s[t.type],e)e(t.data);else for(h=r.data("listeners.postmessage")||{},o=h[t.type]||[],u=0,c=o.length;u<c;u++){if(i=o[u],i.origin&&i.origin!=="*"&&n.origin!==i.origin){console.warn("postmessage message origin mismatch",n.origin,i.origin);t.errback&&(l={message:"postmessage origin mismatch",origin:[n.origin,i.origin]},r.send({target:n.source,data:l,type:t.errback}));continue}function a(i){t.callback&&r.send({target:n.source,data:i,type:t.callback})}try{i.callback?i.fn(t.data,a,n):a(i.fn(t.data,n))}catch(f){if(t.errback)r.send({target:n.source,data:f,type:t.errback});else throw f;}}}};r.hash={send:function(t,i){var o=t.target,e=t.url,u,s,f,h,c,l,a;if(!e){console.warn("postmessage target window url is required");return}if(e=r.hash._url(e),s=r.hash._url(n.location.href),n==o.parent)u="parent";else try{for(f=0,h=parent.frames.length;f<h;f++)if(c=parent.frames[f],c==n){u=f;break}}catch(v){u=n.name}if(u==null){console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list");return}l={"x-requested-with":"postmessage",source:{name:u,url:s},postmessage:i};a="#x-postmessage-id="+r._random();o.location=e+a+encodeURIComponent(JSON.stringify(l))},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){r.data("polling.postmessage")||(setInterval(function(){var i=""+n.location.hash,u=r.hash._regex.exec(i),t;u&&(t=u[1],r.hash._last!==t&&(r.hash._last=t,r.hash._dispatch(i.substring(r.hash._regex_len))))},t.pm.poll||200),r.data("polling.postmessage",1))},_dispatch:function(t){var f,l,s,e,a,u,o,v;if(t){try{if(t=JSON.parse(decodeURIComponent(t)),!(t["x-requested-with"]==="postmessage"&&t.source&&t.source.name!=null&&t.source.url&&t.postmessage))return}catch(h){return}var i=t.postmessage,p=r.data("callbacks.postmessage")||{},c=p[i.type];if(c)c(i.data);else for(f=t.source.name==="parent"?n.parent:n.frames[t.source.name],l=r.data("listeners.postmessage")||{},s=l[i.type]||[],e=0,a=s.length;e<a;e++){if(u=s[e],u.origin&&(o=/https?\:\/\/[^\/]*/.exec(t.source.url)[0],u.origin!=="*"&&o!==u.origin)){console.warn("postmessage message origin mismatch",o,u.origin);i.errback&&(v={message:"postmessage origin mismatch",origin:[o,u.origin]},r.send({target:f,data:v,type:i.errback,hash:!0,url:t.source.url}));continue}function y(n){i.callback&&r.send({target:f,data:n,type:i.callback,hash:!0,url:t.source.url})}try{u.callback?u.fn(i.data,y):y(u.fn(i.data))}catch(h){if(i.errback)r.send({target:f,data:h,type:i.errback,hash:!0,url:t.source.url});else throw h;}}}},_url:function(n){return(""+n).replace(/#.*$/,"")}};t.extend(r,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,typeof jQuery=="undefined"?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={}),function(){function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var c,l,s,a,v=n,h,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i));typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,h=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,c=0;c<a;c+=1)h[c]=u(c,e)||"null";return s=h.length===0?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+v+"]":"["+h.join(",")+"]",n=v,s}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(s=u(l,e),s&&h.push(o(l)+(n?": ":":")+s));else for(l in e)Object.hasOwnProperty.call(e,l)&&(s=u(l,e),s&&h.push(o(l)+(n?": ":":")+s));return s=h.length===0?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+v+"}":"{"+h.join(",")+"}",n=v,s}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(f.lastIndex=0,f.test(n)&&(n=n.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}(),function(n,t){"use strict";n.SeamlessBase={isNumeric:function(n){return n-parseFloat(n)+1>=0},getElement:function(n){var r="querySelectorAll",i;return(n.indexOf("#")===0&&(r="getElementById",n=n.substr(1,n.length)),i=t[r](n),!i)?i:r==="querySelectorAll"?i[0]:i},elementHeight:function(n){var i=0,r=0;return t.all?(i=n.currentStyle.height,this.isNumeric(i)||(i=n.offsetHeight),i=parseInt(i,10),r=parseInt(n.currentStyle.marginTop,10)+parseInt(n.currentStyle.marginBottom,10)):(i=parseInt(t.defaultView.getComputedStyle(n,"").getPropertyValue("height"),10),r=parseInt(t.defaultView.getComputedStyle(n,"").getPropertyValue("margin-top"),10)+parseInt(t.defaultView.getComputedStyle(n,"").getPropertyValue("margin-bottom"),10)),i+r},hasClass:function(n,t){return n.classList?n.classList.contains(t):!!n.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(n,t){n.classList?n.classList.add(t):this.hasClass(n,t)||(n.className+=" "+t)},removeClass:function(n,t){if(n.classList)n.classList.remove(t);else if(this.hasClass(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");n.className=n.className.replace(i," ")}},getParam:function(t,i){i=i||n.location.search;var u="[?&]"+t+"=([^&#]*)",f=new RegExp(u),r=f.exec(i);return r===null?"":decodeURIComponent(r[1].replace(/\+/g," "))},filterText:function(n){return n.replace(/[<>]/g,"")},isEmptyObject:function(n){for(var t in n)return!1;return!0},setStyle:function(t,i){i.length>0&&(i=typeof i=="string"?i:i.join(" "),i=n.SeamlessBase.filterText(i),t.styleSheet?t.styleSheet.cssText=i:t.innerHTML=i)},injectStyles:function(i){var f=this.getElement("style#injected-styles"),r,u;f?n.SeamlessBase.setStyle(f,i):(r=t.createElement("style"),r.setAttribute("type","text/css"),r.setAttribute("id","injected-styles"),n.SeamlessBase.setStyle(r,i),u=t.head||t.getElementsByTagName("head")[0],u&&u.appendChild(r))},injectAppendedStyles:function(n){var r=n.join(";"),u=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.type="text/css";i.styleSheet?i.styleSheet.cssText=r:i.appendChild(t.createTextNode(r));u.appendChild(i)}}}(window,document),function(n){"use strict";n.SeamlessConnection=function(n,t){this.id=0;this.target=n;this.url=t;this.active=!1;this.queue=[]};n.SeamlessConnection.prototype.send=function(t){this.active&&this.target?(t=t||{},t.hasOwnProperty("data")||(t={data:t}),t.target=this.target,t.url=this.url||"index.html",t.type=t.type||"seamless_data",t.data=t.data||{},t.data.__id=this.id,n.pm(t)):this.queue.push(t)};n.SeamlessConnection.prototype.receive=function(t,i){typeof t=="function"&&(i=t,t="seamless_data");var r=this;n.pm.bind(t,function(n,t){return n.__id&&n.__id===r.id?i(n,t):!1})};n.SeamlessConnection.prototype.setActive=function(n){if(this.active=n,this.queue.length>0){for(var t in this.queue)this.send(this.queue[t]);this.queue=[];this.queue.length=0}}}(window),function(n,t,i){"use strict";if(!n.hasOwnProperty("pm")){console.log("You must install the postmessage.js module to use seamless.js.");return}i.seamless=n.seamless={options:{url:"",container:"body",update:200,allowStyleInjection:!1,allowAppendedStyleInjection:!1,requireCookies:!1,cookieFallbackMsg:"Your browser requires this page to be opened in a separate window.",cookieFallbackLinkMsg:"Click Here",cookieFallbackAfterMsg:" to open in a separate window.",onUpdate:null,onConnect:null},connect:function(i){var u,e;i=i||{};for(u in i)this.options.hasOwnProperty(u)&&(this.options[u]=i[u]);i=this.options;var r=new n.SeamlessConnection(n.parent,i.url),f=!1,a=function(n,t,i){f=!0;r.send({type:"seamless_error",data:{msg:n,linkText:t,afterText:i}})};if(r.setActive(!0),i.requireCookies&&(t.cookie="cookieTest=1",t.cookie.indexOf("cookieTest")===-1&&a(i.cookieFallbackMsg,i.cookieFallbackLinkMsg,i.cookieFallbackAfterMsg)),e=n.SeamlessBase.getParam("noiframe").toString(),e==="1"||e.toLowerCase()==="true")r.send({type:"seamless_noiframe",data:{href:n.location.href}});else{var o=!1,v=i.container,c=0,s=0,h=function(){var t,u;if(!f){if(s&&clearTimeout(s),t=n.SeamlessBase.elementHeight(n.SeamlessBase.getElement(v)),!o&&c!==t){if(o=!0,u={height:t},i.onUpdate)i.onUpdate(u);r.send({type:"seamless_update",data:u,success:function(n){c=n.height;o=!1}})}s=setTimeout(h,i.update)}},l=function(n){f||(n=n||0,r.id||(r.send({type:"seamless_ready",data:{}}),n<50&&setTimeout(function(){l(++n)},200)))};n.pm.bind("seamless_styles",function(t){i.allowStyleInjection&&n.SeamlessBase.injectStyles(t);i.allowAppendedStyleInjection&&n.SeamlessBase.injectAppendedStyles(t);h()});n.pm.bind("seamless_connect",function(u){if(r.id=u.id,i.onConnect)i.onConnect(u);var f=t.body.getAttribute("style");return t.body.setAttribute("style","overflow:hidden;"+f),t.body.setAttribute("scroll","no"),i.allowStyleInjection&&n.SeamlessBase.injectStyles(u.styles),h(),u});l()}return r}}}(window,document,typeof jQuery=="undefined"?{}:jQuery);